<ByHowlune>
	<!--Convert into new system for less Netpackages-->
	<set xpath="/item_modifiers/item_modifier[@name='modGunMeleeRadRemover']/effect_group">
		<triggered_effect trigger="onSelfDamagedOther" action="ModifyCVar" target="other" target_tags="radiated" cvar=".RadiatedRegenBlock" operation="set" value="1"/>
	</set>
	<!--Convert all mods that add buffs on equip to passives or cvars-->
	<insertAfter xpath="/item_modifiers/item_modifier/effect_group/triggered_effect[@action='AddBuff' and @buff='buffHarvestXPBalance']">
		<passive_effect name="PlayerExpGain" operation="perc_add" value="-.1" tags="Harvesting"/>
	</insertAfter>
	<remove xpath="/item_modifiers/item_modifier/effect_group/triggered_effect[@action='AddBuff' and @buff='buffHarvestXPBalance']"/>
	<remove xpath="/item_modifiers/item_modifier/effect_group/triggered_effect[@action='RemoveBuff' and @buff='buffHarvestXPBalance']"/>
	<set xpath="/item_modifiers/item_modifier[@name='modArmorBandolier']/effect_group[1]">
		<requirement name="ItemHasTags" tags="armorChest"/>
		<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value=".15">
			<requirement name="CVarCompare" cvar="$BandolierChest" operation="Equals" value="1"/>
		</passive_effect>
		<triggered_effect trigger="onSelfEquipStart" action="ModifyCVar" cvar="$BandolierChest" operation="set" value="1"/>
		<triggered_effect trigger="onSelfEquipStop" action="ModifyCVar" cvar="$BandolierChest" operation="set" value="0"/>
	</set>
	<set xpath="/item_modifiers/item_modifier[@name='modArmorBandolier']/effect_group[2]">
		<requirement name="ItemHasTags" tags="armorLegs"/>
		<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value=".15">
			<requirement name="CVarCompare" cvar="$BandolierChest" operation="Equals" value="0"/>
		</passive_effect>
	</set>
	<!--Fix holosight dot on hinged weapons. Dot floats in place despite the sight being moved.-->
	<set xpath="/item_modifiers/item_modifier[@name='modGunReflexSight']/item_property_overrides[@name='gunRifleT0PipeRifle']/property[@name='ScopeCameraOffset']/@value">-0.0001,-0.002,.1</set>
	<set xpath="/item_modifiers/item_modifier[@name='modGunReflexSight']/item_property_overrides[@name='gunHandgunT0PipePistol']/property[@name='ScopeCameraOffset']/@value">-0.0002,-.0025,.15</set>
	<append xpath="/item_modifiers/item_modifier[@name='modGunReflexSight']">
		<effect_group name="HoloFix" tiered="false">
			<triggered_effect trigger="onSelfHoldingItemCreated" action="SetTransformActive" active="false" parent_transform="#HeldItemRoot" transform_path="holosight/holosight_dot">
				<requirement name="HoldingItemHasTags" tags="m60,RPK"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfHoldingItemCreated" action="AttachPrefabToHeldItem" prefab="@:Other/Items/Misc/holosight_dot.prefab" local_offset="0,0.038,-0.05555" parent_transform="Handle/Cover">
				<requirement name="HoldingItemHasTags" tags="m60,RPK"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfHoldingItemCreated" action="SetTransformActive" active="false" parent_transform="#HeldItemRoot" transform_path="holosight/holosight_dot">
				<requirement name="HoldingItemHasTags" tags="piperifle"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfHoldingItemCreated" action="AttachPrefabToHeldItem" prefab="@:Other/Items/Misc/holosight_dot.prefab" local_offset="0,0.072,0.02" parent_transform="Handle/Hinge">
				<requirement name="HoldingItemHasTags" tags="piperifle"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfHoldingItemCreated" action="SetTransformActive" active="false" parent_transform="#HeldItemRoot" transform_path="holosight/holosight_dot">
				<requirement name="HoldingItemHasTags" tags="pipepistol"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfHoldingItemCreated" action="AttachPrefabToHeldItem" prefab="@:Other/Items/Misc/holosight_dot.prefab" local_offset="0,0.0835,0.0051" parent_transform="Handle/Hinge">
				<requirement name="HoldingItemHasTags" tags="pipepistol"/>
			</triggered_effect>
		</effect_group>
	</append>
	<!--Other players can see different states of your lights than you have set to. These fix that.-->
	<!--Gunlight Fix-->
	<append xpath="/item_modifiers/item_modifier[@name='modGunFlashlight']">
		<effect_group name="Other" tiered="false">
			<triggered_effect trigger="onSelfEquipStop" action="ModifyCVar" cvar=".Flashlight" operation="set" value="0"/>
			<triggered_effect trigger="onSelfEquipStart" action="ModifyCVar" cvar=".Flashlight" operation="set" value="1">
				<requirement name="IsItemActive"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfItemActivate" action="ModifyCVar" cvar=".Flashlight" operation="set" value="1"/>
			<triggered_effect trigger="onSelfItemDeactivate" action="ModifyCVar" cvar=".Flashlight" operation="set" value="0"/>
			<triggered_effect trigger="onSelfItemActivate" action="PlaySound" sound="light_on" play_in_head="true"/>
			<triggered_effect trigger="onSelfItemDeactivate" action="PlaySound" sound="light_off" play_in_head="true"/>
			<triggered_effect trigger="onSelfWalk" action="SetTransformActive" active="false" transform_path="lightSource">
				<requirement name="CVarCompare" cvar=".Flashlight" operation="Equals" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfWalk" action="SetTransformActive" active="false" transform_path="flashlight_lightSource">
				<requirement name="CVarCompare" cvar=".Flashlight" operation="Equals" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfWalk" action="SetTransformActive" active="true" transform_path="lightSource">
				<requirement name="CVarCompare" cvar=".Flashlight" operation="Equals" value="1"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfWalk" action="SetTransformActive" active="true" transform_path="flashlight_lightSource">
				<requirement name="CVarCompare" cvar=".Flashlight" operation="Equals" value="1"/>
			</triggered_effect>
		</effect_group>
	</append>
	<!--Helmet Light Fix-->
	<set xpath="/item_modifiers/item_modifier[@name='modArmorHelmetLight']/effect_group[1]">
		<triggered_effect trigger="onSelfEquipStop" action="ModifyCVar" cvar=".HelmLight" operation="set" value="0"/>
		<triggered_effect trigger="onSelfEquipStart" action="ModifyCVar" cvar=".HelmLight" operation="set" value="1">
			<requirement name="IsItemActive"/>
		</triggered_effect>
		<triggered_effect trigger="onSelfItemActivate" action="ModifyCVar" cvar=".HelmLight" operation="set" value="1"/>
		<triggered_effect trigger="onSelfItemDeactivate" action="ModifyCVar" cvar=".HelmLight" operation="set" value="0"/>
		<triggered_effect trigger="onSelfItemActivate" action="PlaySound" sound="light_on" play_in_head="true"/>
		<triggered_effect trigger="onSelfItemDeactivate" action="PlaySound" sound="light_off" play_in_head="true"/>
		<triggered_effect trigger="onSelfItemDeactivate" action="RemovePart" part="HeadLight"/>
		<triggered_effect trigger="onSelfItemDeactivate" action="RemovePart" part="HeadLightCam"/>
		<triggered_effect trigger="onSelfItemActivate" action="AddPart" part="HeadLight" prefab="Entities/Lighting/miningHelmetLightSource" parentTransform="Spotlight" localPos="0,0,0" localRot="90,0,0"/>
		<triggered_effect trigger="onSelfItemActivate" action="AddPart" part="HeadLightCam" prefab="Entities/Lighting/miningHelmetLightSource" parentTransform="CameraNode" localPos="0,0,0" localRot="-90,0,0"/>
		<triggered_effect trigger="onSelfItemActivate" action="SetPartActive" part="HeadLight" active="@!.IsFPV"/>
		<triggered_effect trigger="onSelfItemActivate" action="SetPartActive" part="HeadLightCam" active="@.IsFPV"/>
	</set>
	<append xpath="/item_modifiers/item_modifier[@name='modArmorHelmetLight']">
		<effect_group name="LightFix" tiered="false">
			<triggered_effect trigger="onSelfWalk" action="RemovePart" part="HeadLight">
				<requirement name="CVarCompare" cvar=".HelmLight" operation="Equals" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfWalk" action="RemovePart" part="HeadLightCam">
				<requirement name="CVarCompare" cvar=".HelmLight" operation="Equals" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfWalk" action="AddPart" part="HeadLight" prefab="Entities/Lighting/miningHelmetLightSource" parentTransform="Spotlight" localPos="0,0,0" localRot="90,0,0">
				<requirement name="CVarCompare" cvar=".HelmLight" operation="Equals" value="1"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfWalk" action="AddPart" part="HeadLightCam" prefab="Entities/Lighting/miningHelmetLightSource" parentTransform="CameraNode" localPos="0,0,0" localRot="-90,0,0">
				<requirement name="CVarCompare" cvar=".HelmLight" operation="Equals" value="1"/>
			</triggered_effect>
		</effect_group>
	</append>
</ByHowlune>